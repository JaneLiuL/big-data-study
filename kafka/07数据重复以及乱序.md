# Kafka消息重试机制
kafka有一个retry机制来保证消息的可靠性，当data从networkclient发送到broker leader发送成功，并且leader将数据写入磁盘之后应答之后就不会触发Retry,但是当leader刚好挂掉一直没有回应的时候，这个时候就会触发retry。

![architect](images/28-kafka.png)

那么当刚好broker leader写入磁盘完成，准备发送应答的时候，这个时候网络不稳定，然后producer就会以为数据没有发送成功，再次retry发送，如下图所示，这个时候就会导致消息重复
![architect](images/29-kafka.png)